<div class="container" ng-cloak>
  <div ng-show="isReady">
    <div class="page-header">
      <h1>SKY API Authorization Code Flow</h1>
    </div>

    <!--
      LOGIN
        This section is hidden if the session has NOT been authenticated.
    -->
    <div ng-if="!isAuthenticated">
      <div class="well">
        <h4 class="well-title">Please log in below:</h4>
        <div class="row">

          <!--
            LOGIN with redirect
              This option redirects the entire page to the Blackbaud Authorization site.
              The user can then authorize the content, and on success will be redirected back to the main page.
          -->
          <!-- <div class="col-sm-6">
            <div class="panel panel-default panel-body">
              <p>
                <a href="/auth/login" class="btn btn-primary btn-block btn-lg"><i class="fa fa-external-link"></i> Authorize using redirect</a>
              </p>
              <p>
                The user authorizes the application after being redirected to the Blackbaud Authorization website.
              </p>
            </div>-->
          </div>

          <!--
            LOGIN with popup
              this option pops open a new window to the bbauth site. The user can then authorize the content,
              and on success, the new window will close, and the parent window will redirect to the main page.
          -->
          <div class="col-sm-6">
            <div class="panel panel-default panel-body">
              <p>
                <button ng-click="popupLogin()" class="btn btn-primary btn-block btn-lg" target="login-iframe"><i class="fa fa-window-restore"></i> Authorize using popup</button>
              </p>
              <p>
                Authorize the application using a browser popup window.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!--
      DEBUGGING DATA
        This section is only visible when the session has been authenticated and
        appropriate constituent data has been returned.
        AngularJS uses a templating engine similar to HandlebarsJS to output model data.
    -->
    <div ng-if="isAuthenticated">
      <div class="well">
        <p>
          Below is used for debugging perposes.
        </p>
      </div>
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Key</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>remaining</td>
              <td>{{ remaining }}</td>
            </tr>
            <tr>
              <td>progress</td>
              <td>{{ progress }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <a href="/auth/logout" class="btn btn-primary">Log out</a>
    </div>
  </div>
</div>
